<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fitteya Tech | Simulador</title>
  <link rel="stylesheet" href="../css/default.css">
  <link rel="stylesheet" href="../css/calc-style.css">
  <link rel="shortcut icon" href="../img/logo.svg">
</head>
<body>
    <div class="back">
    <header>
        <nav class="navbar">
            <div class="navbarLogo">
                <img src="../img/logo.svg">
                Fitteya Tech
            </div>
            <div class="navbarButtons">
                <ul>
                    <a href="home.html">Início</a>
                    <a href="sobre.html">Sobre Nós</a>
                    <a href="contato.html">Contato</a>
                    <a href="hist.html">Nossa História</a>
                    <a href="calc.html">Simulador Financeira</a>
                </ul>
                <img src="../img/linkedIn.png">
                <img src="../img/instagram.png">
                <img src="../img/facebook.png">
            </div>
        </nav>
    </header>

    <main>
        <div id="voltar" class="formCalc">
            <img src="../img/logo.svg" class="formCalcLogo">
            <h3>Total de trigo colhido no último ano:</h3>
            <div class="formCalcSelect">
                <input type="number" id="input_totalTrigo" placeholder="*">
                <select id="select_totalTrigo">
                    <option value="t">Toneladas</option>
                    <option value="kg">Quilogramas</option>
                    <option value="sacas">Sacas</option>
                </select>
            </div>
            <h3>Quantos hectares você planeja plantar na próxima safra?</h3>
            <input type="number" id="input_proximaSafra" placeholder="*">
            <h3>Porcentagem de perdas no transporte e armazenamento:</h3>
            <input type="number" id="input_perdas" placeholder="Opcional">
            <button class="formCalcButton" onclick="calcularInvestimento()">Calcular Investimento</button>
        </div>
      <div id="botao"></div>
    </main>
    </div>
</body>

</html>

<script>

  function voltarText() {
    window.location.reload()
  }

  function calcularInvestimento() {
    var totalTrigo = Number(input_totalTrigo.value)
    var perdas = Number(input_perdas.value)
    var valorTrigo = 1238.12
    var mediaColheita = 3.144
    var tonelada = 'tonelada'
    var toneladaPerda = 'tonelada'
    

    if (select_totalTrigo.value == 'kg') {
      totalTrigo = totalTrigo / 1000
    }
    else if (select_totalTrigo.value == 'sacas') {
      totalTrigo = (totalTrigo * 60) / 1000
    }

    if (input_perdas.value == '') {
      perdas = 24
    }

    var perdaPorcentagem = perdas / 100
    var totalPerda = totalTrigo * perdaPorcentagem
    var proximaSafra = input_proximaSafra.value * mediaColheita
    var prejuizoProximaSafra = (proximaSafra * perdaPorcentagem) * valorTrigo
    var perdaProximaSafra = proximaSafra * perdaPorcentagem
    var ganhosAnual = (totalTrigo - totalPerda) * valorTrigo
    var prejuizo =  totalPerda * valorTrigo
    var ganhosProximaSafra = proximaSafra * valorTrigo

    if(ganhosProximaSafra >= ganhosAnual){
      var lucro = ganhosProximaSafra - ganhosAnual
    }
    else{
      var lucro = ganhosAnual - ganhosProximaSafra
    }

    
    var lucroPorcentagem = ((ganhosProximaSafra - ganhosAnual) / ganhosAnual) * 100

    if (totalPerda > 1.99) {
      toneladaPerda = 'toneladas'
    }

    if (totalTrigo > 1.99) {
      tonelada = 'toneladas'
    }

    if (totalTrigo == 0) {
      alert("Preencha o primeiro campo corretamente!!")
    }
    else if (proximaSafra == 0) {
      alert("Preencha o segundo campo corretamente!!")
    }
    else if (perdas > 100) {
      alert("O valor das perdas não pode ultrapassar 100%")
    }
    else {
    prejuizoProximaSafraFormatado = prejuizoProximaSafra.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'})
    ganhosAnualFormatado = ganhosAnual.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'})
    prejuizoFormatado = prejuizo.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'})
    ganhosProximaSafraFormatado = ganhosProximaSafra.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'})
    lucroFormatado = lucro.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'})
      result.innerHTML =
        `<div class="container-result">
        <h2>Informações sobre o trigo</h2>
        <p>
          Total de Trigo no Ano: <b>${totalTrigo} ${tonelada}</b> <br>
          Total de perdas: <b>${totalPerda} ${toneladaPerda}</b> <br>
          Potencial da próxima safra: <b>${proximaSafra.toFixed(3)} toneladas</b> <br>
        </p>
        <p>Para evitar uma <b class="perda">perda de ${perdaProximaSafra} toneladas</b>, junte-se a nós! </p>
        </div>

        <div class="container-result">
        <h1>CUIDADO</h1>
        <p>
        Você pode <b class="perda">perder ${prejuizoProximaSafraFormatado}</b> se não cuidar da <b>temperatura e umidade</b> do seu trigo.
        </p>
        <p>Mas não se preocupe, <b>a Fitteya Tech cuidará disso para você!</b>
        </p>
        </div>

        <div class="container-result">
        <h2>Informações sobre o dinheiro</h2>
        <p>
        Ganho anual: <b>${ganhosAnualFormatado}</b> <br>
        Prejuízo: <b>${prejuizoFormatado}</b> <br>
        Possíveis ganhos da próxima safra: <b class="lucro"> <br>${ganhosProximaSafraFormatado}</b> <br>
        </p>
        <p>Utilizando nossa tecnologia você pode <b class="lucro">ganhar ${lucroFormatado}</b> a mais na próxima safra,
        isso é um <b class="lucro">aumento de ${lucroPorcentagem.toFixed(2)}%</b> em um ano! <p>
        </div>
      `

      botao.innerHTML = `<div class="div_button btn_voltar">
          <button onclick="voltarText()">Voltar</button>
        </div>`
    }
  }


</script>