<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fitteya Tech | Simulador</title>
  <link rel="stylesheet" href="../css/default.css">
  <link rel="stylesheet" href="../css/calc-style.css">
  <link rel="shortcut icon" href="../img/logo.svg">
</head>
<body>
    <div class="back">
    <header>
        <nav class="navbar">
            <div class="navbarLogo">
                <img src="../img/logo.svg">
                Fitteya Tech
            </div>
            <div class="navbarButtons">
                <ul>
                    <a href="home.html">Início</a>
                    <a href="sobre.html">Sobre Nós</a>
                    <a href="contato.html">Contato</a>
                    <a href="hist.html">Nossa História</a>
                    <a href="calc.html">Simulador Financeira</a>
                </ul>
                <img src="../img/linkedIn.png">
                <img src="../img/instagram.png">
                <img src="../img/facebook.png">
            </div>
        </nav>
    </header>

    <main>
        <div id="voltar" class="formCalc">
            <img src="../img/logo.svg" class="formCalcLogo">
            <h3>Total de trigo colhido no último ano:</h3>
            <div class="formCalcSelect">
                <input type="number" id="input_totalTrigo" placeholder="*">
                <select id="select_totalTrigo">
                    <option value="t">Toneladas</option>
                    <option value="kg">Quilogramas</option>
                    <option value="sacas">Sacas</option>
                </select>
            </div>
            <h3>Quantos hectares você planeja plantar na próxima safra?</h3>
            <input type="number" id="input_proximaSafra" placeholder="*">
            <h3>Porcentagem de perdas no transporte e armazenamento:</h3>
            <input type="number" id="input_perdas" placeholder="Opcional">
            <button class="formCalcButton" onclick="calcularInvestimento()">Calcular Investimento</button>
        </div>
        <div class="formResult">
          <img src="../img/logo.svg" class="formCalcLogo">
          <span id="formResultText">

          </span>
        </div>
    </main>
    </div>
</body>

</html>

<script>
  function calcularInvestimento() {
    const totalTrigo = Number(input_totalTrigo.value)
    let perdas = Number(input_perdas.value)
    const valorTrigo = 1238.12
    const mediaColheita = 3.144
    

    if (select_totalTrigo.value == 'kg') {
      totalTrigo = totalTrigo / 1000
    }
    else if (select_totalTrigo.value == 'sacas') {
      totalTrigo = (totalTrigo * 60) / 1000
    }

    if (input_perdas.value == '') {
      perdas = 24
    }

    var perdaPorcentagem = perdas / 100
    var totalPerda = totalTrigo * perdaPorcentagem
    var proximaSafra = input_proximaSafra.value * mediaColheita
    var prejuizoProximaSafra = (proximaSafra * perdaPorcentagem) * valorTrigo
    var perdaProximaSafra = proximaSafra * perdaPorcentagem
    var ganhosAnual = (totalTrigo - totalPerda) * valorTrigo
    var prejuizo =  totalPerda * valorTrigo
    var ganhosProximaSafra = proximaSafra * valorTrigo

    if(ganhosProximaSafra >= ganhosAnual){
      var lucro = ganhosProximaSafra - ganhosAnual
    }
    else{
      var lucro = ganhosAnual - ganhosProximaSafra
    }

    var lucroPorcentagem = ((ganhosProximaSafra - ganhosAnual) / ganhosAnual) * 100

    if (totalTrigo == 0) {
      alert("Preencha o primeiro campo corretamente!!")
    }
    else if (proximaSafra == 0) {
      alert("Preencha o segundo campo corretamente!!")
    }
    else if (perdas > 100) {
      alert("O valor das perdas não pode ultrapassar 100%")
    }
    else {
    prejuizoProximaSafraFormatado = prejuizoProximaSafra.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'})
    ganhosAnualFormatado = ganhosAnual.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'})
    prejuizoFormatado = prejuizo.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'})
    ganhosProximaSafraFormatado = ganhosProximaSafra.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'})
    lucroFormatado = lucro.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'})
      formResultText.innerHTML =
      `Sua potencial para a próxima safra: ${proximaSafra.toFixed(2)} Toneladas<br>
      o que dão ${ganhosProximaSafraFormatado}, porém você pode perder até 
      ${prejuizoProximaSafraFormatado} se não cuidar da temperatura e umidade do seu 
      trigo. Mas não se preocupe, a Fitteya Tech pode te ajudar a resolver isso!
      <br><br>
      Utilizando nossa tecnologia você pode aumentar seu lucro em até
      ${lucroFormatado} a mais na próxima safra, isso é um aumento de 
      ${lucroPorcentagem.toFixed(2)}% no ano!`
    }
  }
</script>