<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitteya Tech | Dashboard</title>
    <link rel="stylesheet" href="../css/headerDashboard-style.css">
    <link rel="stylesheet" href="../css/dashboard-style.css">
    <link rel="shortcut icon" href="../img/logo.svg">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://kit.fontawesome.com/d94da5d75d.js" crossorigin="anonymous"></script>
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="navbarLogo">
                <img src="../img/logo.svg">
                DASHBOARD
            </div>
            <div class="navbarButtons">
                <i class="fa-solid tema fa-moon" id="icon" onclick="mudarTema()"></i>
                <button class="exitButton" onclick="voltarHome()">Sair</button>
            </div>
        </nav>
    </header>
    <main>
        <div>
            <div class="container">
                Histórico Umidade
                <div id="umidade" class="containerSection">
                    <canvas id="umidadeHist" width="740" height="256"></canvas>
                </div>
            </div>
            <div class="container">
                Histórico Temperatura
                <div id="temperatura" class="containerSection">
                    <canvas id="temperaturaHist" width="740" height="256"></canvas>
                </div>
            </div>
        </div>
        <div class="container sensorList">
            <h3>Sensores</h3>
            <div class="sensorListItem" target="A">
                Sensor Silo 1
                <button id="btnSensor">Selecionar</button>
            </div>
        </div>
        <div class="container sensorList">
            Registro de Estado Crítico
        </div>
    </main>
</body>
</html>

<script>
    function voltarHome() {
        window.location.href="home.html"
    }
    function mudarTema() {
      let icon = document.getElementById("icon");
      let iconAtual = icon.classList.contains("fa-moon") ? "fa-moon" : "fa-sun";
      let novoIcon = iconAtual === "fa-moon" ? "fa-sun" : "fa-moon";
      document.body.classList.toggle("light-theme");
      icon.classList.remove(iconAtual);
      icon.classList.add(novoIcon);
    }

    // Dados de exemplo
    const hours = ['00:00', '01:00', '02:00', '03:00', '04:00', '05:00', '06:00', '07:00', '08:00', '09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00', '21:00', '22:00', '23:00'];
    const humidityData = [65, 63, 62, 61, 60, 59, 58, 57, 58, 60, 62, 64, 66, 68, 70, 72, 70, 68, 66, 64, 62, 60, 58, 57];
    const temperatureData = [20, 21, 21, 20, 19, 18, 18, 18, 19, 20, 21, 22, 24, 26, 27, 28, 28, 27, 25, 23, 22, 21, 20, 20];

    // Configuração do gráfico de umidade
    const umidade = document.getElementById('umidadeHist').getContext('2d');
    const humidityChart = new Chart(umidade, {
      type: 'line',
      data: {
        labels: hours,
        datasets: [{
          label: 'Umidade (%)',
          data: humidityData,
          backgroundColor: 'rgba(75, 192, 192, 0.2)',
          borderColor: 'rgba(75, 192, 192, 1)',
          borderWidth: 1
        }]
      },
      options: {
        maintainAspectRatio: false,
        responsive: true,
        scales: {
          y: {
            beginAtZero: true,
            title: {
              display: true,
              text: 'Umidade (%)'
            }
          }
        }
      }
    });

    // Configuração do gráfico de temperatura
    const temp = document.getElementById('temperaturaHist');
    const tempGrafico = new Chart(temp, {
      type: 'line',
      data: {
        labels: hours,
        datasets: [{
          label: 'Temperatura (°C)',
          data: temperatureData,
          backgroundColor: '#ffda82',
          borderColor: '#ffda82',
          borderWidth: 1
        }]
      },
      options: {
        maintainAspectRatio: false,
        responsive: true,
        scales: {
          y: {
            beginAtZero: false,
            title: {
              display: true,
              text: '(°C)'
            }
          },
        }
      }
    });

    // let sensors = document.getElementsByClassName("sensorListItem");
    // let umidade = document.getElementById("umidade");
    // let temperatura = document.getElementById("temperatura");

    // function newData(target) {
    //     switch (target) {
    //         case "A":
    //             umidade.innerHTML = "Nova umidade " + target;
    //             temperatura.innerHTML = "Opaaaaa";
    //             break;

    //         case "B":
    //             umidade.innerHTML = "Nova umidade " + target;
    //             temperatura.innerHTML = "Vish, vish, vish";
    //             break;

    //         case "C":
    //             umidade.innerHTML = "Nova umidade " + target;
    //             temperatura.innerHTML = "Ooooutra";
    //             break;
    //             default:
    //         break;
    //     }
    // }

    // Array.from(sensors).forEach(el => {
    //     const btn = el.children[0]
    //     const target = el.getAttribute("target");
    //     el.addEventListener("click", () => {
    //         newData(target);
    //     });
    // })
</script>